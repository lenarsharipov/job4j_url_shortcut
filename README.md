# "JOB4J_URL_SHORTCUT" REST API SERVICE

Чтобы обеспечить безопасность пользователей, все ссылки на сайте заменяются ссылками на наш сервис.
Сервис работает через REST API.
## Описание:

### 1. Регистрация сайта

Сервисом могут пользоваться разные сайты. Каждому сайту выдается пару пароль и логин.

Чтобы зарегистрировать сайт в систему нужно отправить запроса.

<b>URL:</b>

<pre>POST /registration</pre>

<b>C телом JSON объекта:</b>

<pre>{site : "job4j.ru"}</pre>

<b>Ответ от сервера:</b>

<pre>{registration : true/false, login: UNIQUE_CODE, password : UNIQUE_CODE}</pre>

### 2. Авторизация
Авторизацию сделать через JWT. Пользователь отправляет POST запрос с login и password и получает ключ.
Этот ключ отправляет в запросе в блоке HEAD.

<pre>Authorization: Bearer e25d31c5-db66-4cf2-85d4-8faa8c544ad6</pre>

### 3. Регистрация URL
Поле того, как пользователь зарегистрировал свой сайт он может отправлять на сайт ссылки и получать преобразованные ссылки.
Пример:

<b>Отправляем URL</b>
<pre>https://job4j.ru/profile/exercise/106/task-view/532</pre>

<b>Получаем</b>
<pre>ZRUfdD2</pre>

Ключ ZRUfD2 ассоциирован с URL.

<b>Опишем вызовы</b>
<pre>POST /convert</pre>

<b>C телом JSON объекта.</b>
<pre>{url: "https://job4j.ru/profile/exercise/106/task-view/532"}</pre>

<b>Ответ от сервера.</b>
<pre>{code: УНИКАЛЬНЫЙ_КОД}</pre>

### 4. Переадресация. Выполняется без авторизации
Когда сайт отправляет ссылку с кодом в ответ нужно вернуть ассоциированный адрес и статус 302.

<b>Опишем вызовы.</b>
<pre>GET /redirect/УНИКАЛЬНЫЙ_КОД</pre>

<b>Ответ от сервера в заголовке.</b>
<pre>HTTP CODE - 302 REDIRECT URL</pre>

### 5. Статистика
В сервисе считается количество вызовов каждого адреса.

Увеличение счетчика нужно сделать в базе данных

По сайту можно получить статистку всех адресов и количество вызовов этого адреса.

<b>Опишем вызовы.</b>
<pre>GET /statistic</pre>

<b>Ответ от сервера JSON.</b>
<pre>{
    {url : URL, total : 0},
    {url : "https://job4j.ru/profile/exercise/106/task-view/532", total : 103}
}</pre>

